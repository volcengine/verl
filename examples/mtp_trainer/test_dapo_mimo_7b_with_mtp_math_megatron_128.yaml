working_dir: ./

excludes:
  - ".git/"

env_vars:
  VLLM_USE_V1: "1"
  HYDRA_FULL_ERROR: "1"
  NCCL_NVLS_ENABLE: "0"
  NCCL_SOCKET_IFNAME: "eth0"
  TMPDIR: "/tmp"
  CUDA_HOME: "/usr/local/cuda"
  CUDA_TMPDIR: "/tmp"
  CUDA_CACHE_PATH: "/tmp/cuda_cache"
  TENSORBOARD_DIR: "/cfs_shtx5_serving_3/mlp/training/docker/user/hadoop-ai-search/houzhenggang/main/mimo-7B/col-128-mtp-scaling0.0"
  # Transformers cache configuration to handle MiMo model custom modules
  HF_HOME: "/cfs_shtx5_serving_3/mlp/training/docker/user/hadoop-ai-search/houzhenggang/tmp/hf_home_mimo"
  PYTHONPATH: "/cfs_shtx5_serving_3/mlp/training/docker/user/hadoop-ai-search/houzhenggang/tmp/hf_home_mimo/modules/"
#  PYTORCH_CUDA_ALLOC_CONF: "max_split_size_mb:256"
#  RAY_DEDUP_LOGS: "0"
#  VERL_LOGGING_LEVEL: "DEBUG"

#  # 强制使用指定网卡（根据实际环境替换eth0，如bond0、enp1s0等）
##  NCCL_SOCKET_IFNAME=eth0
#
#  # 禁用Infiniband（若未使用IB网络，避免自动检测导致冲突）
#  NCCL_IB_DISABLE: "1"
#
#  # 限制Socket缓冲区大小（避免大消息传输时溢出）
#  NCCL_SOCKET_NTHREADS: "4"
#  NCCL_SOCKET_BUFFER_SIZE: "10485760"  # 10MB
#
#  # 降低NCCL通信超时时间（避免长时间阻塞）
#  NCCL_TIMEOUT: "120000"  # 120秒
#
#  # 启用检查点相关的通信优化
#  NCCL_ALGO: "Ring"
#  NCCL_PROTO: "Simple"
#
#  # 调试日志（首次运行建议开启，确认网络交互问题）
#  NCCL_DEBUG: "INFO"
#  NCCL_DEBUG_SUBSYS: "NET,SOCKET"



#  NCCL_NVLS_ENABLE: "0"
#  NCCL_IBEXT_DISABLE: "1"
#  NCCL_IB_TIMEOUT: "22"
#  NCCL_NET_GDR_LEVEL: "2"
#  NCCL_NET_GDR_READ: "1"
#  NCCL_IB_GID_INDEX: "3"
#  NCCL_IB_SL: "3"
#  NCCL_IB_TC: "160"
#  NCCL_IB_HCA: "mlx5_bond_0,mlx5_bond_1,mlx5_bond_2,mlx5_bond_3,mlx5_bond_4,mlx5_bond_5,mlx5_bond_6,mlx5_bond_7"
#  NCCL_P2P_LEVEL: "5"
#  NCCL_SOCKET_NTHREADS: "4"
#  NCCL_NSOCKS_PERTHREAD: "2"
#  CUDA_DEVICE_MAX_CONNECTIONS: "4"
#  NCCL_IB_DISABLE: "1"

#  RAY_DEBUG_POST_MORTEM: "1"
#  HF_DATASETS_CACHE: "/tmp/datasets_cache_mimo"
#  TRANSFORMERS_OFFLINE: "0"
#  HF_DATASETS_OFFLINE: "0"
#  TRANSFORMERS_NO_ADVISORY_WARNINGS: "1"
#  HF_HUB_DISABLE_SYMLINKS_WARNING: "1"
#  HF_HUB_DISABLE_EXPERIMENTAL_WARNING: "1"
#  PYTHONDONTWRITEBYTECODE: "1"
#  HF_DATASETS_TRUST_REMOTE_CODE: "True"
#  TRANSFORMERS_VERBOSITY: "error"
