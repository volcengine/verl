# Required when using verl.utils.omega_conf_to_dataclass to instantiate dataclass configs
_target_: verl.workers.config.DistillationConfig

# specify the default per-component configs
defaults:

  # distillation config, inheriting from trainer/config/ref/ref.yaml
  # Use absolute path + @_here_ to flatten fields at current level
  - /ref/ref@_here_

  # Model config for teacher
  - ../model@teacher_model: hf_model

  # load the default config, then apply the fields in the current yaml
  # self config override anything above
  - _self_

# Whether to enable distillation.
enabled: false

# Loss function mode for distillation
loss_mode: k3

# If distillation loss requires top-k logits, this is the value of k
topk: 32

# Whether the loss should just be the distillation loss or a combination of the distillation loss and the policy loss
use_policy_loss: false

# The coef of the distillation loss when use_policy_loss is true
distillation_loss_coef: 1.0

# Jensen-Shannon Divergence beta for jsd loss mode.
jsd_beta: 0.5

# Optional clamp value for distillation loss. If null, no clamping is applied.
loss_clamp: 10.0